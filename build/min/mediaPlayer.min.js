var MediaPlayer=function(){function t(t,o){this._options={autoplay:!0,browserControls:!1,repeat:!0,volume:.75,volumeStep:.05,shuffle:!1,playlist:[],startFrom:0,style:{width:"100%",background:"#000"}},this._controlMethods={play:this.play,pause:this.pause,next:this.next,prev:this.prev,fullscreen:this.fullscreen,volumeUp:this.volumeUp,volumeDown:this.volumeDown,mute:this.mute,shuffle:this.shuffle},this._playlistLength=0;try{if(!t.length)return void console.error("Can't find target");if(this._player=document.querySelector(t),!this._player)return void console.error("Can't find player");if("object"==typeof o&&o&&(this._options=Object.assign(this._options,o)),console.log(this._options),this._playlistLength=this._options.playlist.length,0==this._playlistLength)return void console.error("Empty playlist");this._init(),this._options.shuffle&&this.shuffle(),this._play(this._options.autoplay)}catch(t){console.warn(t)}}return t.prototype._init=function(){var t=this;if(this._player.volume=this._options.volume,this._options.style.width&&(this._player.style.width=this._options.style.width.toString()),this._options.style.height&&(this._player.style.height=this._options.style.height.toString()),this._player.controls=this._options.browserControls,this._player.addEventListener("ended",function(){return t.next()}),this._options.controls){var o;for(var e in this._options.controls)if(this._controlMethods[e]){o=document.querySelectorAll(this._options.controls[e].toString());var s=o.length;if(s)for(var i=0;i<s;i++)o[i].control=this._controlMethods[e],o[i].addEventListener("click",function(){this.control.call(t)})}}},t.prototype._play=function(t){var o=this._getMediaUrl(this._options.startFrom);o&&0!=o&&(this._options.startFrom++,this._player.src=o.toString(),this._player.load(),0!=t&&this.play())},t.prototype._getMediaUrl=function(t){return"string"==typeof this._options.playlist[t]?this._options.playlist[t]:this._options.repeat?0!=this._options.startFrom&&(this._options.startFrom=0,this._getMediaUrl(this._options.startFrom)):void this.pause()},t.prototype.next=function(){this._play()},t.prototype.prev=function(){this._options.startFrom-=2,this._play()},t.prototype.pause=function(){this._player.pause()},t.prototype.play=function(){this._player.play()},t.prototype.mute=function(){this._player.volume=0},t.prototype.fullscreen=function(){this._player.requestFullscreen?this._player.requestFullscreen():this._player.mozRequestFullScreen?this._player.mozRequestFullScreen():this._player.webkitRequestFullscreen?this._player.webkitRequestFullscreen():this._player.webkitSupportsFullscreen&&this._player.webkitSupportsFullscreen()},t.prototype.volumeUp=function(){return this.changeVolume(this._player.volume+this._options.volumeStep),this._player.volume},t.prototype.volumeDown=function(){return this.changeVolume(this._player.volume-this._options.volumeStep),this._player.volume},t.prototype.changeVolume=function(t){t=t>0?t:0,t=t<1?t:1,this._player.volume=t},t.prototype.shuffle=function(){var t,o,e;for(e=this._options.playlist.length;e;e--)t=Math.floor(Math.random()*e),o=this._options.playlist[e-1],this._options.playlist[e-1]=this._options.playlist[t],this._options.playlist[t]=o},t.prototype.getOptions=function(){return this._options},t.prototype.getPlayer=function(){return this._player},t}();document.addEventListener("DOMContentLoaded",function(){mediaPlayer=new MediaPlayer("#video",{playlist:["http://tvbooking.ru/video/TVBooking.mp4","https://adbooking.ru/video/adbooking.mp4","http://www.w3schools.com/html/mov_bbb.mp4"],style:{width:"500px",height:"500px"},controls:{play:".play",pause:".stop",next:".next",prev:".prev",fullscreen:".fullscreen",mute:".mute"},volume:0})});